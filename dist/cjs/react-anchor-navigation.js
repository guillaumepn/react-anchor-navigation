/**
 * @license react-anchor-navigation 0.1.0
 * MIT License
 * License: MIT
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=()=>{},s=t.createContext({sections:[],hash:"",registerSection:n,unregisterSection:n,setHash:n});function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function a(e){var[r,n]=t.useState("");return t.useEffect(()=>{var t=t=>{n(location.hash),t&&"hashchange"===t.type&&(e.current.blockScrollEvent=!0,setTimeout(()=>{e.current.blockScrollEvent=!1},100))};return addEventListener("hashchange",t,!1),addEventListener("popstate",t,!1),t(),()=>{removeEventListener("hashchange",t,!1),removeEventListener("popstate",t,!1)}},[]),[r,function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(e),globalThis.history&&globalThis.location&&(!t&&"pushState"in history?history.pushState(null,e.substr(1),e):location.hash=e)}]}var l="client"===process.env.BUILD_TARGET&&(()=>{var e=!1;try{var t=()=>{},r=Object.defineProperty({},"passive",{get:()=>e=!0});addEventListener("testPassive",t,r),removeEventListener("testPassive",t,r)}catch(e){}return e})();var i=(e,t)=>{var r=0,n=e;do{r+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return r},u=l&&{capture:!1,passive:!0};function v(e,r){t.useEffect(()=>{var t=function(e,t){var r=null;function n(){r||(r=setTimeout(()=>{r=null,e()},t))}return n.cancel=()=>{r&&(clearTimeout(r),r=null)},n}(()=>{var{blockScrollEvent:t,sections:n,scroller:s}=e.current;if(!t&&n.length){var c=s?s.scrollTop:window.pageYOffset||document.documentElement.scrollTop;if(i(n[0],s)>c)r("#",!1);else{var o=n.findIndex(e=>i(e,s)>c),a=n[Math.max(o-1,0)];a&&r("#".concat(a.id),!1)}}},100);return addEventListener("scroll",t,u),()=>{removeEventListener("scroll",t,u),t.cancel()}},[])}exports.AnchorContext=s,exports.AnchorLink=function(e){var{children:n,className:a,activeClassName:l}=e,i=o(e,["children","className","activeClassName"]),{hash:u}=t.useContext(s),v=(a?"".concat(a," "):"")+(u===i.href?l:"");return r.createElement("a",c({},i,{className:v}),n)},exports.AnchorProvider=function(e){var{children:n,getScroller:c}=e,o=t.useRef({sections:[],blockScrollEvent:!1,scroller:null});c&&(o.current.scroller=c());var[l,u]=a(o);return v(o,u),r.createElement(s.Provider,{value:{hash:l,sections:o.current.sections,setHash:u,registerSection:e=>{var{sections:t,scroller:r}=o.current;if(!t.includes(e)){var n=i(e,r),s=t.findIndex(e=>i(e,r)>n);-1===s?t.push(e):t.splice(s,0,e)}},unregisterSection:e=>{var t=o.current.sections.indexOf(e);-1!==t&&o.current.sections.splice(t,1)}}},n)},exports.AnchorSection=function(e){var{children:n}=e,a=o(e,["children"]),{registerSection:l,unregisterSection:i}=t.useContext(s),u=t.useRef(null);return t.useEffect(()=>(u.current&&(l(u.current),a.id===location.hash.substr(1)&&u.current.scrollIntoView()),()=>{u.current&&i(u.current)}),[]),r.createElement(r.Fragment,null,r.createElement("b",c({},a,{ref:u})),n)},exports.useAnchorScrollListener=v,exports.useHash=a;
